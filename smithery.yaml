# smithery.yaml
version: 1
name: ncbi-mcp
description: NCBI Entrez MCP adapter for Cursor
author: Noah Zeidenberg
license: Apache-2.0

build:
  dockerfile: Dockerfile
  context: .

runtime:
  python: 3.9
  env:
    PYTHONUNBUFFERED: 1
    PYTHONPATH: /app

# startCommand (alternative to connections:)
startCommand:
  type: stdio
  configSchema:
    type: object
    properties: {}
  commandFunction: |
    (config) => ({
      command: "node",
      args: ["./bin/ncbi-mcp.js"],
      env: { PYTHONPATH: "${workspaceFolder}" }
    })

# Existing MCP definition (optional, for local tooling)
mcp:
  version: 1
  protocol: json-rpc
  protocol_version: 2.0
  entrypoint: ncbi-mcp.py
  capabilities:
    - tools
    - resources
  stdio:
    input: stdin
    output: stdout
    error: stderr

tools:
  - name: search_genes
    description: Search for genes in NCBI databases
    parameters:
      type: object
      properties:
        query:
          type: string
          description: Search query for genes
      required:
        - query

  - name: get_gene_info
    description: Get detailed information about a specific gene
    parameters:
      type: object
      properties:
        gene_id:
          type: string
          description: NCBI Gene ID
      required:
        - gene_id

resources:
  - name: ncbi_datasets
    description: NCBI Datasets API
    type: api
    endpoints:
      - name: search
        method: POST
        path: /search
      - name: fetch
        method: GET
        path: /fetch/{id} 